<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>WVAC Observing Locations</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100vw;
    height: 100vh;
    min-height: 400px;
    max-width: 100vw;
}
@media (max-width: 600px) {
    #map {
        min-height: 300px;
        height: 100vh;
    }
    .mapboxgl-popup-content {
        font-size: 14px !important;
        padding: 12px 8px !important;
        min-width: 0 !important;
        max-width: 95vw !important;
    }
}
</style>
</head>
<body>
<div id="map"></div>
<script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoid3Zhc3Ryb25vbXkiLCJhIjoiY21ldWIzcjgzMDU4cjJycHRzYm1qNzJ6OCJ9.gkbKw4F2VlUJjxPaI-7mqQ';
    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/satellite-streets-v12', // Use the standard style for the map
        projection: 'globe', // display the map as a globe
        zoom: 11 , // initial zoom level, 0 is the world view, higher values zoom in
        center: [-120.552317, 47.5392318] // center the map on this longitude and latitude
    });

    map.on('style.load', () => {
        map.addSource('mapbox-dem', {
            'type': 'raster-dem',
            'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
            'tileSize': 512,
            'maxzoom': 14
        });
        // add the DEM source as a terrain layer with exaggerated height
        map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.2 });
    });

    map.addControl(new mapboxgl.NavigationControl());
    map.scrollZoom.enable();

    map.on('style.load', () => {
        map.setFog({}); // Set the default atmosphere style
    });

    // create the popup
    const popup = new mapboxgl.Popup({ offset: 25, scale: 3 }).setHTML(`
    <div class="popup-title">Lake Wenatchee State Park</div>
    <div class="popup-subtitle">553 Ware Rd, Leavenworth, WA 98826</div>
    <div class="popup-narrative">
        <strong class="golden">Contact:</strong> (509)763-3101<br><br>
        <strong class="golden">Website:</strong> <a href="https://parks.wa.gov/find-parks/state-parks/lake-wenatchee-state-park" target="_blank" style="color: #1E90FF;">https://parks.state.wa.us/</a><br><br>
        <strong class="golden">Rules:</strong> Call to gain permission prior after hours entrance. Other rules apply. <br><br>
        <strong class="golden">Bortle:</strong> 3 (Rural) <br><br>
        <strong class="golden">SQM:</strong> 21.5 <br><br>
        <strong class="golden">Viewshed:</strong><br>
        View is mostly zenith and western horizon. Seeing is restricted due to tree canopy and ridge lines. <br><br>
        <strong class="golden">Comments:</strong><br>
        Gates close at dusk and special permissions is not always granted. Its always worth getting a campsite here at washington.goingtocamp.com
    </div>
    <!-- Image removed as requested -->
    `);
    // Make popup text larger
    const popupStyle = document.createElement('style');
    popupStyle.innerHTML = `
        @import url('https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap');
        .mapboxgl-popup-content {
                font-family: 'Roboto', Arial, sans-serif;
                font-size: 32px;
                width: auto;
                min-width: 600px;
                max-width: 100vw;
                max-height: 100vh;
                overflow: visible;
                padding: 24px 32px;
                box-sizing: border-box;
                background: #000;
                color: #fff;
        }
        .popup-narrative strong.golden {
            color: #FFC300;
                white-space: normal;
                word-break: break-word;
                line-height: 1.3;
        }
        .popup-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 0.3em;
            line-height: 1;
            color: #fff;
            text-align: center;
        }
        .popup-subtitle {
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 0.7em;
            line-height: 1;
            color: #ccc;
            text-align: center;
        }
        .popup-narrative {
            font-size: 16px;
            color: #fff;
        }
    `;
    document.head.appendChild(popupStyle);
    // create DOM element for the marker
        // Create a custom red telescope marker
        // Default red marker
        const Marker = new mapboxgl.Marker({ color: '#fc0303', rotation: 0, scale: 1.2 })
            .setLngLat([-120.7275146, 47.8065614])
            .setPopup(popup)
            .addTo(map);
</script>

</body>
</html>
